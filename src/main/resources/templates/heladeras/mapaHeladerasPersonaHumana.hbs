{{#partial "contenido"}}
    <!-- Side Bar -->
    <section class="row flex-grow-1 ms-sm-5 me-sm-5 mt-3 ms-3 me-3">

        <!-- Sidebar -->
        <nav class="col-md-4 pt-4 sidebar">
            <!-- Barra de Búsqueda-->
            <div class="input-group mb-4 pt-1">
                <input type="text" class="form-control search" placeholder="Buscar...">
                <span class="input-group-text border-start-0 clic-card">
                <span class="iconify" data-icon="mdi:magnify" data-width="20" data-height="20"></span>
            </span>
            </div>

            <!-- Resultados de Búsqueda -->
            <div class="scrollable-results">
                {{#each heladeras}}
                    <a href="/mapaHeladeras/{{this.id}}/HeladeraParticular" class="card rounded-3 transition-card mb-2 clic-card" data-id="{{this.id}}">
                        <div class="card-result-body">
                            <h5 class="card-result-title">{{this.nombre}}</h5>
                            <p class="card-result-text">{{this.direccion.nomenclatura}}</p>
                            <p class="card-result-text">Tiene {{this.cantidadViandas}} viandas</p>
                            <p class="card-result-text">Capacidad de {{this.capacidadMaximaViandas}} viandas</p>
                        </div>
                    </a>
                {{/each}}
            </div>
        </nav>

        <!-- Mapa -->
        <main class="col-md-8 pt-4 d-flex flex-column">
            <div id="map"></div>
        </main>
    </section>

    <!-- Script para manejar el mapa y los datos de heladeras -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var heladeras = {{{jsonHeladeras}}};  // Triple mustache para evitar escaping y pasar datos correctamente
            console.log(heladeras);  // Verifica los datos en la consola
            addMarkers(heladeras, function(){window.location.href = `/mapaHeladeras/${this.heladera.id}/HeladeraParticular`;});   // Llama a la función para agregar marcadores
        });
    </script>


{{/partial}}
{{> templates/base titulo="Mapa De Heladeras" mostrarMapa= true mostrarSeccion=true seccion="Mapa De Heladeras" mostrarPersonaHumana=true }}
