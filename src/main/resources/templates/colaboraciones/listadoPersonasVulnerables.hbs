{{#partial "contenido"}}
    <div class="mt-5 ms-sm-5 me-sm-5 mt-3 pb-3 ms-3 me-3 mb-5">
        <a href="/personasVulnerables/nuevo" class="d-flex justify-content-end mb-3 align-items-center">
            <label class="d-flex align-items-center justify-content-center boton">
                Registrar persona vulnerable
                <span class="iconify ms-2" data-icon="material-symbols:add" data-width="24" data-height="24"></span>
            </label>
        </a>
        <div class="row g-3">
            {{#each personasVulnerables}}
                <div class="col-md-4 position-relative">
                    <button type="button" class="delete position-absolute top-0 end-0 me-2" onclick="openModal('{{this.id}}')">
                        <span class="iconify" data-icon="mdi:remove" data-width="18" data-height="18"></span>
                    </button>
                    <a href="/personasVulnerables/{{this.id}}/edicion" class="dark-text">
                        <div class="distribution-card">
                            <div class="row mb-2">
                                <span class="d-flex fw-bold fs-5">{{this.nombre}} {{this.apellido}}</span>
                            </div>
                            <div class="row mb-2">
                                <span><strong>{{this.documento.tipo}}:</strong> {{this.documento.numero}}</span>
                            </div>
                            <div class="row mb-2">
                                <span><strong>Fecha nacimiento:</strong> {{this.fechaDeNacimiento}}</span>
                            </div>
                            {{#if this.direccion.nomenclatura}}
                                <div class="row mb-2">
                                    <span><strong>Dirección:</strong> {{this.direccion.nomenclatura}}</span>
                                </div>
                            {{/if}}
                            {{#if this.menoresAcargo}}
                                <div class="row mb-2">
                                    <span><strong>Cantidad de menores a cargo:</strong> {{this.menoresAcargo}}</span>
                                </div>
                            {{/if}}
                            <div class="row mb-2">
                                <span><strong>Fecha registro:</strong> {{this.fechaDeRegistro}}</span>
                            </div>
                        </div>
                    </a>
                </div>
            {{/each}}
        </div>
        <form method="POST" class="modal fade" id="deleteConfirmationModal" role="dialog" aria-labelledby="deleteConfirmationModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="deleteConfirmationModalLabel">Confirmación de Eliminación</h5>
                        <button type="button" class="modal-close position-absolute top-0 end-0 me-2 close" data-dismiss="modal" aria-label="Close">
                            <span class="iconify" data-icon="mdi:remove" data-width="18" data-height="18"></span>
                        </button>
                    </div>
                    <div class="modal-body">
                        ¿Estás seguro de que deseas eliminar esta persona?
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="modal-button" data-dismiss="modal">Cancelar</button>
                        <button type="submit" id="confirmDelete" class="modal-button">Sí, eliminar</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <script>
        let deleteId;

        function openModal(id) {
            deleteId = id;
            document.querySelector('#deleteConfirmationModal').setAttribute('action', `/personasVulnerables/${deleteId}/eliminacion`);
            $('#deleteConfirmationModal').modal('show');
        }
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
{{/partial}}

{{> templates/base titulo="Personas vulnerables" mostrarPersonaHumana=true mostrarIrAtras=true paginaAtras="/" mostrarSeccion=true seccion="Personas vulnerables"}}
